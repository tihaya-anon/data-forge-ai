# Contributing to DataForge AI

## Project Purpose

This is a **portfolio/demonstration project** for showcasing big data + AI/LLM engineering skills. It's not a production system.

## Development Setup

### Prerequisites

- Docker & Docker Compose
- Make
- D2 (optional, for local diagram generation): `curl -fsSL https://d2lang.com/install.sh | sh -s --`

### Quick Start

```bash
# Initialize project
make dev-init

# Start minimal environment (storage + monitoring)
make start

# Or start everything
make docker-up

# Check service URLs
make urls
```

## Project Structure

```
├── Makefile                 # Main entry (includes makefiles/*.mk)
├── makefiles/
│   ├── diagrams.mk          # Diagram generation targets
│   ├── docker.mk            # Docker operations
│   └── dev.mk               # Development utilities
├── docker/
│   ├── compose.base.yml     # Network/volume definitions
│   ├── compose.storage.yml  # Kafka, Milvus, Redis, ES
│   ├── compose.compute.yml  # Spark, Flink
│   └── ...
├── docs/
│   ├── diagrams/*.d2        # Diagram sources
│   └── images/              # Generated (gitignored)
```

## Making Changes

### Adding a New Make Target

1. Choose the appropriate file in `makefiles/`
2. Add target with `## description` for help generation:

```makefile
my-target: ## This appears in make help
	@printf "$(CYAN)Doing something...$(NC)\n"
```

### Adding a New Docker Service

1. Choose or create `docker/compose.*.yml`
2. Define service with healthcheck
3. Use network `dataforge` (external)
4. Update `makefiles/docker.mk` if needed

### Adding a New Diagram

1. Create `docs/diagrams/my-diagram.d2`
2. Run `make diagrams` to test locally
3. Commit only the `.d2` file (SVG is generated by CI)

**D2 Rules:**
- Theme: 200, Layout: elk
- No external icon URLs
- No `near: right` attribute

### Modifying Documentation

- Architecture changes → Update both diagram AND `docs/ARCHITECTURE.md`
- Resume content → Update `docs/RESUME_DESCRIPTION.md`

## Code Style

### Makefile
- Use `printf` (not `echo`) for colored output
- Include `## comment` for help auto-generation

### Docker Compose
- Self-contained files (no cross-file YAML anchors)
- Container naming: `dataforge-<service>`

### D2 Diagrams
- Chinese labels are fine
- Use color styles consistently with existing diagrams

## Commit Messages

Follow conventional commits:

```
feat: add new feature
fix: fix something
docs: documentation changes
refactor: code refactoring
chore: maintenance tasks
```

## Questions?

This is a personal portfolio project. Feel free to fork and adapt for your own use.
